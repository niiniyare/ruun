/* ============================================================================
   Kbd Component
   ============================================================================
   Keyboard shortcut display component for showing keyboard combinations
   and shortcuts in a visually distinct way.
   
   Structure:
   - .kbd              - Single key or shortcut
   - .kbd-group        - Container for multiple keys (e.g., Ctrl+S)
   - .kbd-separator    - Separator between keys in a group
   ============================================================================ */

/* Base
   ============================================================================ */

.kbd {
  /* Display */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  
  /* Spacing */
  padding: 0.125rem 0.375rem;
  min-width: 1.5rem;
  
  /* Typography */
  font-family: var(--font-mono);
  font-size: 0.75rem;
  line-height: 1.25rem;
  font-weight: 500;
  white-space: nowrap;
  
  /* Colors */
  color: var(--kbd-foreground, var(--foreground));
  background-color: var(--kbd-background, var(--muted));
  
  /* Borders */
  border: 1px solid var(--kbd-border, var(--border));
  border-radius: var(--radius-sm);
  
  /* Shadow for depth */
  box-shadow: 
    0 1px 0 0 var(--kbd-shadow, rgba(0, 0, 0, 0.1)),
    inset 0 0 0 1px var(--kbd-highlight, rgba(255, 255, 255, 0.1));
  
  /* Interaction */
  user-select: none;
}

/* Group
   ============================================================================ */

.kbd-group {
  /* Display */
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  
  /* Typography */
  font-family: var(--font-mono);
  font-size: 0.75rem;
  line-height: 1.25rem;
}

/* Separator
   ============================================================================ */

.kbd-separator {
  /* Display */
  display: inline-flex;
  align-items: center;
  
  /* Spacing */
  margin: 0 0.125rem;
  
  /* Typography */
  font-size: 0.625rem;
  color: var(--muted-foreground);
  
  /* Default content */
  content: "+";
}

/* Common separator symbols */
.kbd-separator::before {
  content: "+";
}

.kbd-separator[data-symbol="-"]::before {
  content: "-";
}

.kbd-separator[data-symbol="or"]::before {
  content: "or";
  font-size: 0.75rem;
  margin: 0 0.25rem;
}

.kbd-separator[data-symbol="/"]::before {
  content: "/";
}

/* Size Variants
   ============================================================================ */

/* Small */
.kbd-sm {
  padding: 0.0625rem 0.25rem;
  font-size: 0.625rem;
  line-height: 1rem;
  min-width: 1.25rem;
}

/* Large */
.kbd-lg {
  padding: 0.25rem 0.5rem;
  font-size: 0.875rem;
  line-height: 1.5rem;
  min-width: 2rem;
}

/* Style Variants
   ============================================================================ */

/* Flat style (no depth) */
.kbd-flat {
  box-shadow: none;
  border-color: var(--border);
}

/* Dark style */
.kbd-dark {
  color: var(--background);
  background-color: var(--foreground);
  border-color: var(--foreground);
  box-shadow: 
    0 1px 0 0 rgba(0, 0, 0, 0.3),
    inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

/* Light style */
.kbd-light {
  background-color: var(--background);
  border-color: var(--muted-foreground);
}

/* Special Keys
   ============================================================================ */

/* Modifier keys */
.kbd-modifier {
  font-weight: 600;
  background-color: var(--muted);
}

/* Function keys */
.kbd-function {
  background-color: var(--primary-foreground);
  color: var(--primary);
  border-color: var(--primary);
}

/* States
   ============================================================================ */

/* Active/pressed state */
.kbd-active,
.kbd:active {
  transform: translateY(1px);
  box-shadow: 
    0 0 0 0 var(--kbd-shadow, rgba(0, 0, 0, 0.1)),
    inset 0 1px 2px 0 rgba(0, 0, 0, 0.1);
}

/* Disabled state */
.kbd-disabled,
.kbd:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Context Modifiers
   ============================================================================ */

/* In prose/text context */
.prose .kbd,
p .kbd,
li .kbd {
  margin: 0 0.125rem;
  vertical-align: baseline;
}

/* In code blocks */
pre .kbd,
code .kbd {
  font-size: inherit;
  padding: 0.0625rem 0.25rem;
}

/* Responsive
   ============================================================================ */

@media (max-width: 640px) {
  .kbd {
    font-size: 0.625rem;
    padding: 0.0625rem 0.25rem;
    min-width: 1.25rem;
  }
  
  .kbd-group {
    font-size: 0.625rem;
  }
}

/* Dark Mode
   ============================================================================ */

@media (prefers-color-scheme: dark) {
  .kbd {
    --kbd-background: var(--muted);
    --kbd-border: var(--muted-foreground);
    --kbd-shadow: rgba(0, 0, 0, 0.3);
    --kbd-highlight: rgba(255, 255, 255, 0.05);
  }
  
  .kbd-light {
    background-color: var(--muted);
    border-color: var(--border);
  }
}

/* Utilities
   ============================================================================ */

/* Common key abbreviations */
.kbd[data-key="cmd"]::before,
.kbd[data-key="command"]::before {
  content: "⌘";
  font-size: 1em;
}

.kbd[data-key="ctrl"]::before,
.kbd[data-key="control"]::before {
  content: "Ctrl";
}

.kbd[data-key="alt"]::before,
.kbd[data-key="option"]::before {
  content: "⌥";
  font-size: 1em;
}

.kbd[data-key="shift"]::before {
  content: "⇧";
  font-size: 1em;
}

.kbd[data-key="enter"]::before,
.kbd[data-key="return"]::before {
  content: "↵";
  font-size: 1em;
}

.kbd[data-key="tab"]::before {
  content: "⇥";
  font-size: 1em;
}

.kbd[data-key="delete"]::before,
.kbd[data-key="backspace"]::before {
  content: "⌫";
  font-size: 1em;
}

.kbd[data-key="escape"]::before,
.kbd[data-key="esc"]::before {
  content: "Esc";
}

.kbd[data-key="space"]::before {
  content: "␣";
  font-size: 1em;
}

/* Arrow keys */
.kbd[data-key="up"]::before { content: "↑"; }
.kbd[data-key="down"]::before { content: "↓"; }
.kbd[data-key="left"]::before { content: "←"; }
.kbd[data-key="right"]::before { content: "→"; }

/* Print-ready styles */
@media print {
  .kbd {
    border: 1px solid #000;
    box-shadow: none;
    background-color: #fff;
    color: #000;
  }
}