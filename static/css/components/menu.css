/* Menu Components CSS Extension for Basecoat
 * Provides menu and menu-item classes following Basecoat conventions
 */

@layer components {
  .menu {
    background-color: oklch(1 0 0); /* bg-popover */
    color: oklch(0.129 0.042 265.755); /* popover-foreground */
    border: 1px solid oklch(0.922 0 0); /* border */
    @apply min-w-32 overflow-hidden rounded-md p-1 shadow-md;
  }

  .menu-item {
    @apply relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors;
    
    /* Base states */
    &:focus {
      background-color: oklch(0.968 0.007 247.896); /* accent */
      color: oklch(0.21 0.034 264.665); /* accent-foreground */
    }
    
    &[data-disabled] {
      @apply pointer-events-none opacity-50;
    }

    &:hover {
      background-color: oklch(0.968 0.007 247.896); /* accent */
      color: oklch(0.21 0.034 264.665); /* accent-foreground */
    }

    &[aria-current='page'],
    &.menu-item-active {
      background-color: oklch(0.968 0.007 247.896); /* accent */
      color: oklch(0.21 0.034 264.665); /* accent-foreground */
      @apply font-medium;
    }

    &[data-destructive='true'],
    &.menu-item-destructive {
      color: oklch(0.577 0.245 25.723); /* destructive */
      
      &:focus {
        background-color: oklch(0.577 0.245 25.723); /* destructive */
        color: oklch(0.985 0 0); /* destructive-foreground */
      }
    }
  }

  .menu-item-divider {
    @apply -mx-1 my-1 h-px;
    background-color: oklch(0.868 0.005 286.286); /* muted */
  }

  .menu-item-content {
    @apply flex flex-1 flex-col gap-0.5;
  }

  .menu-item-text {
    @apply text-sm font-medium;
  }

  .menu-item-description {
    @apply text-xs;
    color: oklch(0.556 0.013 285.805); /* muted-foreground */
  }

  .menu-item-icon {
    @apply mr-2 h-4 w-4 shrink-0;
  }

  .menu-item-icon-right {
    @apply ml-auto h-4 w-4 shrink-0;
  }

  .menu-item-badge {
    @apply ml-auto;
  }

  /* Checkbox menu items */
  .menu-item:has(.menu-item-checkbox-input) {
    @apply relative pl-8;
  }

  .menu-item-checkbox-input {
    @apply sr-only;
  }

  .menu-item-checkbox-indicator {
    @apply absolute left-2 flex h-3.5 w-3.5 items-center justify-center;

    &::after {
      @apply content-[''] h-2 w-2 rounded-sm opacity-0 transition-opacity;
    }

    .menu-item-checkbox-input:checked + &::after {
      @apply opacity-100;
      background-color: currentColor;
    }
  }

  /* Radio menu items */
  .menu-item:has(.menu-item-radio-input) {
    @apply relative pl-8;
  }

  .menu-item-radio-input {
    @apply sr-only;
  }

  .menu-item-radio-indicator {
    @apply absolute left-2 flex h-3.5 w-3.5 items-center justify-center;

    &::after {
      @apply content-[''] h-1.5 w-1.5 rounded-full opacity-0 transition-opacity;
    }

    .menu-item-radio-input:checked + &::after {
      @apply opacity-100;
      background-color: currentColor;
    }
  }

  /* Submenu styling */
  .menu-item-submenu-container {
    @apply relative;
  }

  .menu-item-submenu-dropdown {
    background-color: oklch(1 0 0); /* bg-popover */
    color: oklch(0.129 0.042 265.755); /* popover-foreground */
    border: 1px solid oklch(0.922 0 0); /* border */
    @apply absolute left-full top-0 ml-1 min-w-32 overflow-hidden rounded-md p-1 shadow-md z-50;
  }

  /* Size variants */
  .menu-item-sm {
    @apply px-1.5 py-1 text-xs;
  }

  .menu-item-lg {
    @apply px-3 py-2 text-base;
  }

  /* Empty state icon */
  .empty-state-icon {
    @apply h-12 w-12;
    color: oklch(0.556 0.013 285.805 / 0.5); /* muted-foreground with 50% opacity */
  }
}
