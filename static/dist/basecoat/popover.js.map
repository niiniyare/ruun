{
  "version": 3,
  "sources": ["../../js/basecoat/popover.js"],
  "sourcesContent": ["(() => {\n  const initPopover = (popoverComponent) => {\n    const trigger = popoverComponent.querySelector(':scope > button');\n    const content = popoverComponent.querySelector(':scope > [data-popover]');\n\n    if (!trigger || !content) {\n      const missing = [];\n      if (!trigger) missing.push('trigger');\n      if (!content) missing.push('content');\n      console.error(`Popover initialisation failed. Missing element(s): ${missing.join(', ')}`, popoverComponent);\n      return;\n    }\n\n    const closePopover = (focusOnTrigger = true) => {\n      if (trigger.getAttribute('aria-expanded') === 'false') return;\n      trigger.setAttribute('aria-expanded', 'false');\n      content.setAttribute('aria-hidden', 'true');\n      if (focusOnTrigger) {\n        trigger.focus();\n      }\n    };\n\n    const openPopover = () => {\n      document.dispatchEvent(new CustomEvent('basecoat:popover', {\n        detail: { source: popoverComponent }\n      }));\n      \n      const elementToFocus = content.querySelector('[autofocus]');\n      if (elementToFocus) {\n        content.addEventListener('transitionend', () => {\n          elementToFocus.focus();\n        }, { once: true });\n      }\n\n      trigger.setAttribute('aria-expanded', 'true');\n      content.setAttribute('aria-hidden', 'false');\n    };\n\n    trigger.addEventListener('click', () => {\n      const isExpanded = trigger.getAttribute('aria-expanded') === 'true';\n      if (isExpanded) {\n        closePopover();\n      } else {\n        openPopover();\n      }\n    });\n\n    popoverComponent.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape') {\n        closePopover();\n      }\n    });\n\n    document.addEventListener('click', (event) => {\n      if (!popoverComponent.contains(event.target)) {\n        closePopover();\n      }\n    });\n\n    document.addEventListener('basecoat:popover', (event) => {\n      if (event.detail.source !== popoverComponent) {\n        closePopover(false);\n      }\n    });\n\n    popoverComponent.dataset.popoverInitialized = true;\n    popoverComponent.dispatchEvent(new CustomEvent('basecoat:initialized'));\n  };\n\n  if (window.basecoat) {\n    window.basecoat.register('popover', '.popover:not([data-popover-initialized])', initPopover);\n  }\n})();\n"],
  "mappings": ";;AAAA,GAAC,MAAM;AACL,UAAM,cAAc,CAAC,qBAAqB;AACxC,YAAM,UAAU,iBAAiB,cAAc,iBAAiB;AAChE,YAAM,UAAU,iBAAiB,cAAc,yBAAyB;AAExE,UAAI,CAAC,WAAW,CAAC,SAAS;AACxB,cAAM,UAAU,CAAC;AACjB,YAAI,CAAC;AAAS,kBAAQ,KAAK,SAAS;AACpC,YAAI,CAAC;AAAS,kBAAQ,KAAK,SAAS;AACpC,gBAAQ,MAAM,sDAAsD,QAAQ,KAAK,IAAI,CAAC,IAAI,gBAAgB;AAC1G;AAAA,MACF;AAEA,YAAM,eAAe,CAAC,iBAAiB,SAAS;AAC9C,YAAI,QAAQ,aAAa,eAAe,MAAM;AAAS;AACvD,gBAAQ,aAAa,iBAAiB,OAAO;AAC7C,gBAAQ,aAAa,eAAe,MAAM;AAC1C,YAAI,gBAAgB;AAClB,kBAAQ,MAAM;AAAA,QAChB;AAAA,MACF;AAEA,YAAM,cAAc,MAAM;AACxB,iBAAS,cAAc,IAAI,YAAY,oBAAoB;AAAA,UACzD,QAAQ,EAAE,QAAQ,iBAAiB;AAAA,QACrC,CAAC,CAAC;AAEF,cAAM,iBAAiB,QAAQ,cAAc,aAAa;AAC1D,YAAI,gBAAgB;AAClB,kBAAQ,iBAAiB,iBAAiB,MAAM;AAC9C,2BAAe,MAAM;AAAA,UACvB,GAAG,EAAE,MAAM,KAAK,CAAC;AAAA,QACnB;AAEA,gBAAQ,aAAa,iBAAiB,MAAM;AAC5C,gBAAQ,aAAa,eAAe,OAAO;AAAA,MAC7C;AAEA,cAAQ,iBAAiB,SAAS,MAAM;AACtC,cAAM,aAAa,QAAQ,aAAa,eAAe,MAAM;AAC7D,YAAI,YAAY;AACd,uBAAa;AAAA,QACf,OAAO;AACL,sBAAY;AAAA,QACd;AAAA,MACF,CAAC;AAED,uBAAiB,iBAAiB,WAAW,CAAC,UAAU;AACtD,YAAI,MAAM,QAAQ,UAAU;AAC1B,uBAAa;AAAA,QACf;AAAA,MACF,CAAC;AAED,eAAS,iBAAiB,SAAS,CAAC,UAAU;AAC5C,YAAI,CAAC,iBAAiB,SAAS,MAAM,MAAM,GAAG;AAC5C,uBAAa;AAAA,QACf;AAAA,MACF,CAAC;AAED,eAAS,iBAAiB,oBAAoB,CAAC,UAAU;AACvD,YAAI,MAAM,OAAO,WAAW,kBAAkB;AAC5C,uBAAa,KAAK;AAAA,QACpB;AAAA,MACF,CAAC;AAED,uBAAiB,QAAQ,qBAAqB;AAC9C,uBAAiB,cAAc,IAAI,YAAY,sBAAsB,CAAC;AAAA,IACxE;AAEA,QAAI,OAAO,UAAU;AACnB,aAAO,SAAS,SAAS,WAAW,4CAA4C,WAAW;AAAA,IAC7F;AAAA,EACF,GAAG;",
  "names": []
}
