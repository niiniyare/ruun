"use strict";(()=>{(()=>{const n=t=>{const i=t.querySelector(":scope > button"),a=t.querySelector(":scope > [data-popover]");if(!i||!a){const e=[];i||e.push("trigger"),a||e.push("content"),console.error(`Popover initialisation failed. Missing element(s): ${e.join(", ")}`,t);return}const s=(e=!0)=>{i.getAttribute("aria-expanded")!=="false"&&(i.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),e&&i.focus())},r=()=>{document.dispatchEvent(new CustomEvent("basecoat:popover",{detail:{source:t}}));const e=a.querySelector("[autofocus]");e&&a.addEventListener("transitionend",()=>{e.focus()},{once:!0}),i.setAttribute("aria-expanded","true"),a.setAttribute("aria-hidden","false")};i.addEventListener("click",()=>{i.getAttribute("aria-expanded")==="true"?s():r()}),t.addEventListener("keydown",e=>{e.key==="Escape"&&s()}),document.addEventListener("click",e=>{t.contains(e.target)||s()}),document.addEventListener("basecoat:popover",e=>{e.detail.source!==t&&s(!1)}),t.dataset.popoverInitialized=!0,t.dispatchEvent(new CustomEvent("basecoat:initialized"))};window.basecoat&&window.basecoat.register("popover",".popover:not([data-popover-initialized])",n)})();})();
