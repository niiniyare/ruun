"use strict";(()=>{(()=>{const f=r=>{const o=r.querySelector("header input"),c=r.querySelector('[role="menu"]');if(!o||!c){const t=[];o||t.push("input"),c||t.push("menu"),console.error(`Command component initialization failed. Missing element(s): ${t.join(", ")}`,r);return}const u=Array.from(c.querySelectorAll('[role="menuitem"]')),s=u.filter(t=>!t.hasAttribute("disabled")&&t.getAttribute("aria-disabled")!=="true");let i=[...s],a=-1;const d=t=>{if(a>-1&&s[a]&&s[a].classList.remove("active"),a=t,a>-1){const e=s[a];e.classList.add("active"),e.id?o.setAttribute("aria-activedescendant",e.id):o.removeAttribute("aria-activedescendant")}else o.removeAttribute("aria-activedescendant")},b=()=>{const t=o.value.trim().toLowerCase();d(-1),i=[],u.forEach(e=>{if(e.hasAttribute("data-force")){e.setAttribute("aria-hidden","false"),s.includes(e)&&i.push(e);return}const n=(e.dataset.filter||e.textContent).trim().toLowerCase(),l=(e.dataset.keywords||"").toLowerCase(),m=n.includes(t)||l.includes(t);e.setAttribute("aria-hidden",String(!m)),m&&s.includes(e)&&i.push(e)}),i.length>0&&(d(s.indexOf(i[0])),i[0].scrollIntoView({block:"nearest"}))};o.addEventListener("input",b);const h=t=>{if(!["ArrowDown","ArrowUp","Enter","Home","End"].includes(t.key))return;if(t.key==="Enter"){t.preventDefault(),a>-1&&s[a]?.click();return}if(i.length===0)return;t.preventDefault();const e=a>-1?i.indexOf(s[a]):-1;let n=e;switch(t.key){case"ArrowDown":e<i.length-1&&(n=e+1);break;case"ArrowUp":e>0?n=e-1:e===-1&&(n=0);break;case"Home":n=0;break;case"End":n=i.length-1;break}if(n!==e){const l=i[n];d(s.indexOf(l)),l.scrollIntoView({block:"nearest",behavior:"smooth"})}};c.addEventListener("mousemove",t=>{const e=t.target.closest('[role="menuitem"]');if(e&&i.includes(e)){const n=s.indexOf(e);n!==a&&d(n)}}),c.addEventListener("click",t=>{const e=t.target.closest('[role="menuitem"]');if(e&&i.includes(e)){const n=r.closest("dialog.command-dialog");n&&!e.hasAttribute("data-keep-command-open")&&n.close()}}),o.addEventListener("keydown",h),i.length>0&&(d(s.indexOf(i[0])),i[0].scrollIntoView({block:"nearest"})),r.dataset.commandInitialized=!0,r.dispatchEvent(new CustomEvent("basecoat:initialized"))};window.basecoat&&window.basecoat.register("command",".command:not([data-command-initialized])",f)})();})();
